<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Artistic Milliners - Opportunity to Order Lifecycle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: 'Salesforce Sans', Arial, sans-serif;
        background: linear-gradient(135deg, #032d60 0%, #0176d3 100%);
        min-height: 100vh;
        padding: 2rem;
      }

      .tree-container {
        background: white;
        border-radius: 1rem;
        padding: 2rem;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 1400px;
        margin: 0 auto;
      }

      .tree {
        position: relative;
      }

      .tree-node {
        position: relative;
        padding-left: 2rem;
        margin-bottom: 0.5rem;
      }

      .tree-node::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 50%;
        width: 1rem;
        border-left: 2px solid #cbd5e0;
        border-bottom: 2px solid #cbd5e0;
      }

      .tree-node:last-child::before {
        border-left: 2px solid #cbd5e0;
        bottom: 100%;
      }

      .tree-node::after {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 0;
        border-left: 2px solid #cbd5e0;
      }

      .tree-node:last-child::after {
        display: none;
      }

      .node-content {
        margin-left: 1rem;
        padding: 1rem;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
        cursor: pointer;
        border-left: 4px solid transparent;
      }

      .node-content:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .level-0 .node-content {
        background: linear-gradient(135deg, #032d60 0%, #0176d3 100%);
        color: white;
        border-left-color: #0176d3;
        font-size: 1.25rem;
        font-weight: bold;
      }

      .level-1 .node-content {
        background: linear-gradient(135deg, #0176d3 0%, #1589ee 100%);
        color: white;
        border-left-color: #0176d3;
        font-weight: 600;
      }

      .level-2 .node-content {
        background: linear-gradient(135deg, #1589ee 0%, #57a3f3 100%);
        color: white;
        border-left-color: #1589ee;
        font-weight: 600;
      }

      .level-3 .node-content {
        background: linear-gradient(135deg, #57a3f3 0%, #78b9f7 100%);
        color: #1a202c;
        border-left-color: #57a3f3;
        font-weight: 500;
      }

      .level-4 .node-content {
        background: linear-gradient(135deg, #78b9f7 0%, #9acefb 100%);
        color: #1a202c;
        border-left-color: #78b9f7;
        font-weight: 500;
      }

      .level-5 .node-content {
        background: linear-gradient(135deg, #9acefb 0%, #bcdeff 100%);
        color: #1a202c;
        border-left-color: #9acefb;
        font-weight: 500;
      }

      .level-6 .node-content {
        background: linear-gradient(135deg, #bcdeff 0%, #ddeeff 100%);
        color: #1a202c;
        border-left-color: #bcdeff;
      }

      .node-title {
        font-weight: bold;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
      }

      .node-icon {
        width: 24px;
        height: 24px;
        margin-right: 0.5rem;
        display: inline-block;
      }

      .node-description {
        font-size: 0.875rem;
        opacity: 0.95;
        line-height: 1.6;
      }

      .node-description ul {
        margin-top: 0.5rem;
        padding-left: 1.25rem;
      }

      .node-description li {
        margin-bottom: 0.25rem;
      }

      .tree-children {
        margin-top: 0.5rem;
      }

      .header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .header h1 {
        font-size: 2.5rem;
        font-weight: bold;
        color: #1a202c;
        margin-bottom: 0.5rem;
      }

      .header p {
        color: #718096;
        font-size: 1.125rem;
      }

      .legend {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 2rem;
        padding: 1rem;
        background: #f7fafc;
        border-radius: 0.5rem;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .legend-box {
        width: 20px;
        height: 20px;
        border-radius: 0.25rem;
      }

      .toggle-btn {
        display: inline-block;
        margin-left: 0.5rem;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        text-align: center;
        line-height: 20px;
        font-size: 0.75rem;
        font-weight: bold;
      }

      .collapsed > .tree-children {
        display: none;
      }

      /* Stages Section Styles */
      .stages-section {
        margin-top: 1rem;
        margin-left: 1rem;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 0.5rem;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .stages-header {
        padding: 0.75rem 1rem;
        background: rgba(255, 255, 255, 0.3);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-weight: 600;
        transition: all 0.2s ease;
      }

      .stages-header:hover {
        background: rgba(255, 255, 255, 0.4);
      }

      .stages-toggle {
        font-size: 0.875rem;
        transition: transform 0.3s ease;
      }

      .stages-section.collapsed .stages-toggle {
        transform: rotate(-90deg);
      }

      .stages-content {
        padding: 1rem;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
      }

      .stages-section.collapsed .stages-content {
        display: none;
      }

      /* Fields Section Styles */
      .fields-section {
        margin-top: 1rem;
        margin-left: 1rem;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 0.5rem;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .fields-header {
        padding: 0.65rem 1rem;
        background: rgba(255, 255, 255, 0.25);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.2s ease;
      }

      .fields-header:hover {
        background: rgba(255, 255, 255, 0.35);
      }

      .fields-toggle {
        font-size: 0.75rem;
        transition: transform 0.3s ease;
      }

      .fields-section.collapsed .fields-toggle {
        transform: rotate(-90deg);
      }

      .fields-content {
        padding: 0.875rem;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
      }

      .fields-section.collapsed .fields-content {
        display: none;
      }

      .field-group {
        background: rgba(255, 255, 255, 0.5);
        border-radius: 0.375rem;
        padding: 0.5rem;
      }

      .field-group-title {
        font-weight: 600;
        font-size: 0.85rem;
        margin-bottom: 0.5rem;
        color: #032d60;
        border-bottom: 1px solid rgba(3, 45, 96, 0.2);
        padding-bottom: 0.25rem;
      }

      .field-item {
        display: flex;
        justify-content: space-between;
        padding: 0.35rem 0;
        font-size: 0.8rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      }

      .field-item:last-child {
        border-bottom: none;
      }

      .field-name {
        font-weight: 500;
        color: #1e293b;
      }

      .field-type {
        color: #64748b;
        font-family: 'Courier New', monospace;
        font-size: 0.75rem;
      }

      .field-note {
        font-size: 0.7rem;
        color: #64748b;
        font-style: italic;
        margin-top: 0.15rem;
      }

      .stage-card {
        background: white;
        border-radius: 0.5rem;
        padding: 0.875rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border-left: 4px solid;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
      }

      .stage-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateY(-3px);
      }

      .stage-card.sales {
        border-left-color: #0176d3;
      }

      .stage-card.pd {
        border-left-color: #1589ee;
      }

      .stage-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        flex-wrap: wrap;
        gap: 0.25rem;
      }

      .stage-name {
        font-weight: bold;
        font-size: 0.9rem;
        color: #1a202c;
        flex: 1;
      }

      .stage-owner {
        display: inline-block;
        padding: 0.2rem 0.5rem;
        border-radius: 0.75rem;
        font-size: 0.65rem;
        font-weight: 600;
        color: white;
        white-space: nowrap;
      }

      .stage-owner.sales {
        background: #0176d3;
      }

      .stage-owner.pd {
        background: #1589ee;
      }

      .stage-owner.rnd {
        background: #8b5cf6;
      }

      .stage-details {
        color: #4a5568;
        font-size: 0.75rem;
        margin-bottom: 0.5rem;
        line-height: 1.5;
        flex: 1;
      }

      .stage-details div {
        margin-bottom: 0.2rem;
      }

      .customer-touchpoint {
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        border-left: 3px solid #f59e0b;
        padding: 0.5rem;
        border-radius: 0.375rem;
        font-size: 0.7rem;
        color: #78350f;
        display: flex;
        align-items: start;
        gap: 0.4rem;
        margin-top: auto;
      }

      .customer-touchpoint-icon {
        font-size: 0.9rem;
        flex-shrink: 0;
      }

      /* Workflow Path Styles */
      .workflow-path {
        background: linear-gradient(135deg, #0176d3 0%, #1589ee 100%);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .workflow-title {
        color: white;
        font-size: 1.5rem;
        font-weight: bold;
        text-align: center;
        margin-bottom: 1.5rem;
      }

      .workflow-steps {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 0.75rem;
      }

      .workflow-step {
        background: white;
        padding: 0.75rem 1.25rem;
        border-radius: 2rem;
        font-weight: 600;
        font-size: 0.9rem;
        color: #0176d3;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
        white-space: nowrap;
      }

      .workflow-step:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        background: #0176d3;
        color: white;
      }

      .workflow-arrow {
        color: white;
        font-size: 1.5rem;
        font-weight: bold;
      }

      /* Core Concept Section Styles */
      .core-concept {
        background: white;
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border-left: 6px solid #0176d3;
      }

      .core-concept-title {
        color: #032d60;
        font-size: 1.25rem;
        font-weight: bold;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .core-concept-subtitle {
        color: #4a5568;
        font-size: 1rem;
        margin-bottom: 1.5rem;
        font-style: italic;
      }

      .core-concept-boxes {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
      }

      .concept-box {
        background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
        border-radius: 0.75rem;
        padding: 1.5rem;
        border-left: 4px solid;
        transition: all 0.3s ease;
      }

      .concept-box:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      }

      .concept-box.sales {
        border-left-color: #0176d3;
      }

      .concept-box.pd {
        border-left-color: #1589ee;
      }

      .concept-box-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
      }

      .concept-box-title {
        font-size: 1.1rem;
        font-weight: bold;
        color: #1a202c;
      }

      .concept-box-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.75rem;
        font-weight: 600;
        color: white;
      }

      .concept-box-badge.sales {
        background: #0176d3;
      }

      .concept-box-badge.pd {
        background: #1589ee;
      }

      .concept-box-description {
        color: #4a5568;
        font-size: 0.9rem;
        line-height: 1.6;
        margin-bottom: 1rem;
      }

      .concept-box-list {
        list-style: none;
        padding: 0;
      }

      .concept-box-list li {
        padding: 0.5rem 0;
        color: #2d3748;
        font-size: 0.875rem;
        display: flex;
        align-items: start;
        gap: 0.5rem;
      }

      .concept-box-list li::before {
        content: '‚úì';
        color: #0176d3;
        font-weight: bold;
        flex-shrink: 0;
      }

      @media (max-width: 768px) {
        .core-concept-boxes {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 1200px) {
        .stages-content {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 768px) {
        .stages-content {
          grid-template-columns: 1fr;
        }
      }

      /* Back to Top Button Styles */
      .back-to-top {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: #0176d3;
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 1000;
      }

      .back-to-top.visible {
        opacity: 1;
        visibility: visible;
      }

      .back-to-top:hover {
        background: #032d60;
        transform: translateY(-5px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
      }

      /* Table of Contents Styles */
      .toc-container {
        position: sticky;
        top: 0;
        background: white;
        border-radius: 0.75rem;
        padding: 1.25rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #0176d3;
        z-index: 100;
      }

      .toc-title {
        font-size: 1.1rem;
        font-weight: bold;
        color: #032d60;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .toc-links {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 0.5rem;
      }

      .toc-link {
        color: #0176d3;
        text-decoration: none;
        padding: 0.5rem;
        border-radius: 0.375rem;
        transition: all 0.2s ease;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.35rem;
      }

      .toc-link:hover {
        background: #f0f8ff;
        transform: translateX(5px);
      }

      /* Summary Section Styles */
      .summary-section {
        background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border-left: 6px solid #0176d3;
      }

      .summary-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: #032d60;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .summary-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .stat-card {
        background: white;
        padding: 1rem;
        border-radius: 0.5rem;
        text-align: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .stat-number {
        font-size: 2rem;
        font-weight: bold;
        color: #0176d3;
        margin-bottom: 0.25rem;
      }

      .stat-label {
        font-size: 0.85rem;
        color: #4a5568;
        font-weight: 600;
      }

      .visual-legend {
        background: white;
        padding: 1.25rem;
        border-radius: 0.5rem;
        margin-top: 1rem;
      }

      .legend-title {
        font-size: 1rem;
        font-weight: bold;
        color: #032d60;
        margin-bottom: 0.75rem;
      }

      .legend-items {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 0.75rem;
      }

      .legend-item-full {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.85rem;
        color: #2d3748;
      }

      .legend-icon {
        font-size: 1.1rem;
      }

      @media (max-width: 768px) {
        .core-concept-boxes {
          grid-template-columns: 1fr;
        }
        .back-to-top {
          bottom: 1rem;
          right: 1rem;
          width: 45px;
          height: 45px;
        }
      }

      @media (max-width: 1200px) {
        .stages-content {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 768px) {
        .stages-content {
          grid-template-columns: 1fr;
        }
      }

      @media print {
        body {
          background: white;
          padding: 1rem;
        }
        .tree-container {
          box-shadow: none;
        }
        .back-to-top {
          display: none !important;
        }
        .toc-container {
          position: static;
          page-break-after: always;
        }
        .workflow-path {
          background: white;
          border: 2px solid #0176d3;
          page-break-inside: avoid;
        }
        .core-concept {
          page-break-inside: avoid;
        }
        .stages-section {
          page-break-inside: avoid;
        }
        .stages-section.collapsed .stages-content {
          display: grid !important;
        }
        .stages-section.collapsed .stages-toggle {
          display: none;
        }
        .summary-section {
          background: white;
          border: 2px solid #0176d3;
          page-break-inside: avoid;
        }
        .node-content {
          page-break-inside: avoid;
        }
        @page {
          margin: 1.5cm;
        }
      }
    </style>
  </head>
  <body>
    <div class="tree-container">
      <div class="header">
        <h1>Artistic Milliners - Opportunity to Order Lifecycle</h1>
      </div>

      <!-- Executive Summary Section -->
      <div
        class="summary-section"
        id="summary"
      >
        <div class="summary-title">üìä Executive Summary</div>
        <div class="summary-stats">
          <div class="stat-card">
            <div class="stat-number">9</div>
            <div class="stat-label">Core Objects</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">32</div>
            <div class="stat-label">Total Stages</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">12</div>
            <div class="stat-label">Customer Touchpoints</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">6</div>
            <div class="stat-label">Stage Workflows</div>
          </div>
        </div>

        <div class="visual-legend">
          <div class="legend-title">Visual Guide</div>
          <div class="legend-items">
            <div class="legend-item-full">
              <span
                class="legend-icon"
                style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 0.25rem 0.5rem; border-radius: 0.25rem"
                >üì©</span
              >
              <span><strong>Yellow Boxes:</strong> Customer touchpoints - moments where customer interaction occurs</span>
            </div>
            <div class="legend-item-full">
              <span
                class="legend-icon"
                style="background: #0176d3; color: white; padding: 0.25rem 0.5rem; border-radius: 0.75rem; font-size: 0.65rem"
                >Sales</span
              >
              <span><strong>Sales Owned:</strong> Stages managed by Sales team</span>
            </div>
            <div class="legend-item-full">
              <span
                class="legend-icon"
                style="background: #1589ee; color: white; padding: 0.25rem 0.5rem; border-radius: 0.75rem; font-size: 0.65rem"
                >PD</span
              >
              <span><strong>PD Owned:</strong> Stages managed by Product Development team</span>
            </div>
            <div class="legend-item-full">
              <span class="legend-icon">‚ñº</span>
              <span><strong>Expandable Sections:</strong> Click section headers to expand/collapse detailed stage information</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Table of Contents -->
      <div
        class="toc-container"
        id="tableOfContents"
      >
        <div class="toc-title">üìë Quick Navigation</div>
        <div class="toc-links">
          <a
            href="#workflowPath"
            class="toc-link"
            >üîÑ Workflow Path</a
          >
          <a
            href="#coreConcept"
            class="toc-link"
            >üí° Core Concept</a
          >
          <a
            href="#opportunityStages"
            class="toc-link"
            >üìä Opportunity Stages</a
          >
          <a
            href="#csrStages"
            class="toc-link"
            >üîÑ CSR Lifecycle</a
          >
          <a
            href="#sampleDevStages"
            class="toc-link"
            >üßµ Sample Development</a
          >
          <a
            href="#rndStages"
            class="toc-link"
            >üî¨ R&D Process</a
          >
          <a
            href="#sampleIssuanceStages"
            class="toc-link"
            >üìÆ Sample Issuance</a
          >
          <a
            href="#commercialProposalStages"
            class="toc-link"
            >üí∞ Commercial Proposal</a
          >
        </div>
      </div>

      <!-- Complete Workflow Path -->
      <div
        class="workflow-path"
        id="workflowPath"
      >
        <div class="workflow-title">üîÑ Complete Workflow Path - Bird's Eye View</div>
        <div class="workflow-steps">
          <div class="workflow-step">üè¢ Account</div>
          <div class="workflow-arrow">‚Üí</div>
          <div class="workflow-step">üíº Opportunity</div>
          <div class="workflow-arrow">‚Üí</div>
          <div class="workflow-step">üìã Customer Sample Request</div>
          <div class="workflow-arrow">‚Üí</div>
          <div class="workflow-step">üßµ Sample Development</div>
          <div class="workflow-arrow">‚Üí</div>
          <div class="workflow-step">üîÑ Iterations</div>
          <div class="workflow-arrow">‚Üí</div>
          <div class="workflow-step">üì¶ Sample Development Order</div>
          <div class="workflow-arrow">‚Üí</div>
          <div class="workflow-step">üìÆ Sample Request</div>
          <div class="workflow-arrow">‚Üí</div>
          <div class="workflow-step">üí∞ Commercial Proposal</div>
          <div class="workflow-arrow">‚Üí</div>
          <div class="workflow-step">‚úÖ Customer Order</div>
        </div>
      </div>

      <!-- Core Concept Section -->
      <div
        class="core-concept"
        id="coreConcept"
      >
        <div class="core-concept-title">üí° Core Concept ‚Äî Separation of Commercial Flow and Execution</div>
        <div class="core-concept-subtitle">
          By separating commercial negotiations from technical execution, we give users transparency and predictability. They always know their deal status
          independent of sampling complexity.
        </div>

        <div class="core-concept-boxes">
          <!-- Sales Opportunity Box -->
          <div class="concept-box sales">
            <div class="concept-box-header">
              <div class="concept-box-title">Sales Opportunity</div>
              <div class="concept-box-badge sales">Sales Owned</div>
            </div>
            <div class="concept-box-description">
              Maintains a single, linear commercial journey from discovery to closed deal‚Äîgiving users clarity without disruption from technical complexities.
            </div>
            <ul class="concept-box-list">
              <li>Keeps commercial discussions focused and moving forward</li>
              <li>Shields users from internal development iterations</li>
              <li>Provides clear milestone visibility throughout the deal lifecycle</li>
            </ul>
          </div>

          <!-- Customer Sample Request Box -->
          <div class="concept-box pd">
            <div class="concept-box-header">
              <div class="concept-box-title">Customer Sample Request (CSR)</div>
              <div class="concept-box-badge pd">PD Owned</div>
            </div>
            <div class="concept-box-description">
              Handles all technical development, sampling iterations, and R&D work in parallel‚Äîwithout impacting the customer's commercial view or slowing down
              deal progression.
            </div>
            <ul class="concept-box-list">
              <li>Manages multiple iterations and development cycles independently</li>
              <li>Absorbs technical complexity so Sales can focus on customer relationships</li>
              <li>Delivers approved samples ready for immediate pricing and ordering</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="tree">
        <!-- Account -->
        <div class="tree-node level-0">
          <div class="node-content">
            <div class="node-title">
              <span class="node-icon">üè¢</span>
              Account
            </div>
            <div class="node-description">Represents the Customer / Brand</div>
          </div>

          <div class="tree-children">
            <!-- Business Opportunity -->
            <div class="tree-node level-1">
              <div class="node-content">
                <div class="node-title">
                  <span class="node-icon">üíº</span>
                  Business Opportunity
                </div>
                <div class="node-description">
                  Commercial context for a customer requirement<br />
                  (Fabric, Apparel, Yarn, Processing, etc.)
                </div>

                <!-- Stages Section -->
                <div
                  class="stages-section"
                  id="opportunityStages"
                >
                  <div
                    class="stages-header"
                    onclick="toggleStages()"
                  >
                    <span>üìä Opportunity Stages Flow</span>
                    <span class="stages-toggle">‚ñº</span>
                  </div>
                  <div class="stages-content">
                    <!-- Stage 1: Discovery & Scoping -->
                    <div class="stage-card sales">
                      <div class="stage-header">
                        <span class="stage-name">Discovery & Scoping</span>
                        <span class="stage-owner sales">Sales</span>
                      </div>
                      <div class="stage-details">
                        <div><strong>Purpose:</strong> Understand customer need and validate business opportunity</div>
                        <div><strong>Activities:</strong></div>
                        <div>‚Ä¢ Customer requirement captured</div>
                        <div>‚Ä¢ Business case validated</div>
                        <div>‚Ä¢ Initial qualification completed</div>
                        <div><strong>Exit Criteria:</strong> Customer intent confirmed, ready for PD assessment</div>
                      </div>
                      <div class="customer-touchpoint">
                        <span class="customer-touchpoint-icon">üì©</span>
                        <span><strong>Customer:</strong> Shares initial requirement and business intent</span>
                      </div>
                    </div>

                    <!-- Stage 2: PD Review -->
                    <div class="stage-card pd">
                      <div class="stage-header">
                        <span class="stage-name">PD Review</span>
                        <span class="stage-owner pd">PD</span>
                      </div>
                      <div class="stage-details">
                        <div><strong>Purpose:</strong> Technical feasibility assessment and development planning</div>
                        <div><strong>Activities:</strong></div>
                        <div>‚Ä¢ Customer Sample Request (CSR) created with technical specifications</div>
                        <div>‚Ä¢ Development approach decided</div>
                        <div>‚Ä¢ Resource and timeline estimates</div>
                        <div><strong>Exit Criteria:</strong> CSR approved, ready for sampling execution</div>
                      </div>
                    </div>

                    <!-- Stage 3: Sample in Progress -->
                    <div class="stage-card pd">
                      <div class="stage-header">
                        <span class="stage-name">Sample in Progress</span>
                        <span class="stage-owner pd">PD</span>
                      </div>
                      <div class="stage-details">
                        <div><strong>Purpose:</strong> Sample development and customer evaluation cycles</div>
                        <div><strong>Activities:</strong></div>
                        <div>‚Ä¢ Sample Development records in execution</div>
                        <div>‚Ä¢ Iterations and refinements as needed</div>
                        <div>‚Ä¢ Customer feedback incorporated</div>
                        <div><strong>Exit Criteria:</strong> Customer grants Gold Seal approval on all samples</div>
                      </div>
                      <div class="customer-touchpoint">
                        <span class="customer-touchpoint-icon">üß™</span>
                        <span><strong>Customer:</strong> Reviews interim samples and provides feedback</span>
                      </div>
                    </div>

                    <!-- Stage 4: Sample Approved -->
                    <div class="stage-card pd">
                      <div class="stage-header">
                        <span class="stage-name">Sample Approved</span>
                        <span class="stage-owner pd">PD</span>
                      </div>
                      <div class="stage-details">
                        <div><strong>Purpose:</strong> Final sample approval and handoff to Sales</div>
                        <div><strong>Activities:</strong></div>
                        <div>‚Ä¢ Customer grants Gold Seal approval</div>
                        <div>‚Ä¢ Final costing and specifications locked</div>
                        <div>‚Ä¢ PD ‚Üí Sales handoff completed</div>
                        <div><strong>Exit Criteria:</strong> Commercial Proposal created and ready for customer</div>
                      </div>
                      <div class="customer-touchpoint">
                        <span class="customer-touchpoint-icon">‚úÖ</span>
                        <span><strong>Customer:</strong> Grants final sample approval (Gold Seal)</span>
                      </div>
                    </div>

                    <!-- Stage 5: Commercial Proposal -->
                    <div class="stage-card sales">
                      <div class="stage-header">
                        <span class="stage-name">Commercial Proposal</span>
                        <span class="stage-owner sales">Sales</span>
                      </div>
                      <div class="stage-details">
                        <div><strong>Purpose:</strong> Pricing negotiation and commercial terms finalization</div>
                        <div><strong>Activities:</strong></div>
                        <div>‚Ä¢ Final costing and margins calculated</div>
                        <div>‚Ä¢ Quote presented to customer</div>
                        <div>‚Ä¢ Commercial terms negotiated</div>
                        <div><strong>Exit Criteria:</strong> Customer accepts proposal and issues PO, or declines</div>
                      </div>
                      <div class="customer-touchpoint">
                        <span class="customer-touchpoint-icon">üí¨</span>
                        <span><strong>Customer:</strong> Reviews pricing and commercial terms</span>
                      </div>
                    </div>

                    <!-- Stage 6: Closed Won / Lost -->
                    <div class="stage-card sales">
                      <div class="stage-header">
                        <span class="stage-name">Closed Won / Lost</span>
                        <span class="stage-owner sales">Sales</span>
                      </div>
                      <div class="stage-details">
                        <div><strong>Purpose:</strong> Final deal outcome and opportunity closure</div>
                        <div><strong>Outcome - Won:</strong></div>
                        <div>‚Ä¢ Customer issues Purchase Order</div>
                        <div>‚Ä¢ Customer Order created in system</div>
                        <div><strong>Outcome - Lost:</strong></div>
                        <div>‚Ä¢ Deal declined by customer or withdrawn</div>
                        <div>‚Ä¢ Loss reason documented for insights</div>
                      </div>
                      <div class="customer-touchpoint">
                        <span class="customer-touchpoint-icon">üìÑ</span>
                        <span><strong>Customer:</strong> Issues Purchase Order (or formally declines)</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Core Fields Section -->
                <div
                  class="fields-section collapsed"
                  id="opportunityFields"
                >
                  <div
                    class="fields-header"
                    onclick="toggleFields('opportunityFields')"
                  >
                    <span>üîß Core Fields</span>
                    <span class="fields-toggle">‚ñº</span>
                  </div>
                  <div class="fields-content">
                    <div class="field-group">
                      <div class="field-group-title">A. Identity & Commercial Control</div>
                      <div class="field-item">
                        <span class="field-name">Opportunity Name</span>
                        <span class="field-type">Text</span>
                      </div>
                      <div class="field-item">
                        <span class="field-name">Account</span>
                        <span class="field-type">Lookup</span>
                      </div>
                      <div class="field-item">
                        <span class="field-name">Close Date</span>
                        <span class="field-type">Date</span>
                      </div>
                      <div class="field-item">
                        <span class="field-name">Amount</span>
                        <span class="field-type">Currency</span>
                      </div>
                      <div class="field-item">
                        <span class="field-name">Currency</span>
                        <span class="field-type">ISO Code</span>
                      </div>
                      <div class="field-item">
                        <span class="field-name">Opportunity Owner</span>
                        <span class="field-type">User</span>
                      </div>
                    </div>
                    <div class="field-group">
                      <div class="field-group-title">B. Opportunity Stage</div>
                      <div class="field-item">
                        <span class="field-name">Stage</span>
                        <span class="field-type">Picklist</span>
                      </div>
                      <div class="field-note">Business stages only - See stages flow below</div>
                    </div>
                    <div class="field-group">
                      <div class="field-group-title">C. Context Fields</div>
                      <div class="field-item">
                        <span class="field-name">Customer Type</span>
                        <span class="field-type">Picklist</span>
                      </div>
                      <div class="field-item">
                        <span class="field-name">Product Category</span>
                        <span class="field-type">Picklist</span>
                      </div>
                      <div class="field-item">
                        <span class="field-name">Required Clusters</span>
                        <span class="field-type">Multi-select</span>
                      </div>
                      <div class="field-item">
                        <span class="field-name">Complexity Level</span>
                        <span class="field-type">Picklist</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="tree-children">
                <!-- Customer Sample Request -->
                <div class="tree-node level-2">
                  <div class="node-content">
                    <div class="node-title">
                      <span class="node-icon">üìã</span>
                      Customer Sample Request (CSR)
                    </div>
                    <div class="node-description">
                      Structured representation of customer intent<br />
                      Translates discovery discussions into technical evaluation inputs
                      <ul>
                        <li>‚Ä¢ Multiple material / option line items</li>
                        <li>‚Ä¢ Fabric, yarn, apparel, processing inputs</li>
                        <li>‚Ä¢ No execution commitment</li>
                      </ul>
                    </div>

                    <!-- Customer Sample Request Stages Section -->
                    <div
                      class="stages-section"
                      id="csrStages"
                    >
                      <div
                        class="stages-header"
                        onclick="toggleCSRStages()"
                      >
                        <span>üîÑ Customer Sample Request Lifecycle Stages</span>
                        <span class="stages-toggle">‚ñº</span>
                      </div>
                      <div class="stages-content">
                        <!-- Stage 1: Draft -->
                        <div class="stage-card pd">
                          <div class="stage-header">
                            <span class="stage-name">Draft</span>
                            <span class="stage-owner pd">PD</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> Initial CSR creation and configuration</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ Capture customer requirements and create CSR line items</div>
                            <div>‚Ä¢ Document technical specifications and quality requirements</div>
                            <div>‚Ä¢ Review and approve CSR for execution</div>
                            <div><strong>Exit Criteria:</strong> CSR review completed, ready for execution</div>
                          </div>
                        </div>

                        <!-- Stage 2: In Execution -->
                        <div class="stage-card pd">
                          <div class="stage-header">
                            <span class="stage-name">In Execution</span>
                            <span class="stage-owner pd">PD</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> Active sample development and customer feedback cycles</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ Execute sample development and R&D work</div>
                            <div>‚Ä¢ Issue physical samples to customer for evaluation</div>
                            <div>‚Ä¢ Incorporate customer feedback and iterate as needed</div>
                            <div><strong>Exit Criteria:</strong> All required samples shared with customer</div>
                          </div>
                        </div>

                        <!-- Stage 3: Final Customer Decision -->
                        <div class="stage-card pd">
                          <div class="stage-header">
                            <span class="stage-name">Final Customer Decision</span>
                            <span class="stage-owner pd">PD</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> Awaiting final approval or rejection from customer</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ Submit final samples and test results to customer</div>
                            <div>‚Ä¢ Customer conducts final evaluation</div>
                            <div>‚Ä¢ Await Gold Seal approval or rejection decision</div>
                            <div><strong>Exit Criteria:</strong> Customer grants approval (Gold Seal) or rejects CSR</div>
                          </div>
                        </div>

                        <!-- Stage 4: Approved (Gold Seal) -->
                        <div class="stage-card pd">
                          <div class="stage-header">
                            <span class="stage-name">Approved (Gold Seal)</span>
                            <span class="stage-owner pd">PD</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> Customer has granted final approval for all samples</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ Lock technical specifications and finalize costing</div>
                            <div>‚Ä¢ Mark all samples as Gold Seal approved</div>
                            <div>‚Ä¢ Handoff from PD to Sales for commercial proposal</div>
                            <div><strong>Next Step:</strong> Sales creates Commercial Proposal based on approved samples</div>
                          </div>
                          <div class="customer-touchpoint">
                            <span class="customer-touchpoint-icon">‚úÖ</span>
                            <span><strong>Customer:</strong> Grants Gold Seal approval - confirms all samples meet requirements</span>
                          </div>
                        </div>

                        <!-- Stage 5: Rejected / Cancelled -->
                        <div class="stage-card sales">
                          <div class="stage-header">
                            <span class="stage-name">Rejected / Cancelled</span>
                            <span class="stage-owner pd">PD</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> CSR closed without customer approval</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ Document rejection reason for future learning</div>
                            <div>‚Ä¢ Close all associated Sample Development records</div>
                            <div>‚Ä¢ Update Opportunity status accordingly</div>
                          </div>
                          <div class="customer-touchpoint">
                            <span class="customer-touchpoint-icon">‚ùå</span>
                            <span><strong>Customer:</strong> Formally rejects samples or cancels requirement</span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Core Fields Section -->
                    <div
                      class="fields-section collapsed"
                      id="csrFields"
                    >
                      <div
                        class="fields-header"
                        onclick="toggleFields('csrFields')"
                      >
                        <span>üîß Core Fields</span>
                        <span class="fields-toggle">‚ñº</span>
                      </div>
                      <div class="fields-content">
                        <div class="field-group">
                          <div class="field-group-title">A. Identity & Governance</div>
                          <div class="field-item">
                            <span class="field-name">CSR Number</span>
                            <span class="field-type">Auto Number</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Opportunity</span>
                            <span class="field-type">Lookup</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Account</span>
                            <span class="field-type">Formula</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">CSR Owner</span>
                            <span class="field-type">User</span>
                          </div>
                        </div>
                        <div class="field-group">
                          <div class="field-group-title">B. Request Definition</div>
                          <div class="field-item">
                            <span class="field-name">Requested Product Type</span>
                            <span class="field-type">Picklist</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Request Reason</span>
                            <span class="field-type">Picklist</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Target Quantity</span>
                            <span class="field-type">Number</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Target Delivery Date</span>
                            <span class="field-type">Date</span>
                          </div>
                        </div>
                        <div class="field-group">
                          <div class="field-group-title">C. Status (UX Only)</div>
                          <div class="field-item">
                            <span class="field-name">CSR Status</span>
                            <span class="field-type">Picklist</span>
                          </div>
                          <div class="field-note">UX only, non-blocking</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="tree-children">
                    <!-- CSR Line Item -->
                    <div class="tree-node level-3">
                      <div class="node-content">
                        <div class="node-title">
                          <span class="node-icon">üìù</span>
                          CSR Line Item
                        </div>
                        <div class="node-description">
                          Technical decomposition of customer request<br />
                          Each line item represents a specific material/option variation
                        </div>

                        <!-- Core Fields Section -->
                        <div
                          class="fields-section collapsed"
                          id="csrLineItemFields"
                        >
                          <div
                            class="fields-header"
                            onclick="toggleFields('csrLineItemFields')"
                          >
                            <span>üîß Core Fields</span>
                            <span class="fields-toggle">‚ñº</span>
                          </div>
                          <div class="fields-content">
                            <div class="field-group">
                              <div class="field-group-title">A. Identity</div>
                              <div class="field-item">
                                <span class="field-name">CSR Line Number</span>
                                <span class="field-type">Auto Number</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">Parent CSR</span>
                                <span class="field-type">Master-Detail</span>
                              </div>
                            </div>
                            <div class="field-group">
                              <div class="field-group-title">B. Technical Definition</div>
                              <div class="field-item">
                                <span class="field-name">Item Type</span>
                                <span class="field-type">Picklist</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">Composition</span>
                                <span class="field-type">Text</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">Construction</span>
                                <span class="field-type">Text</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">Finish / Wash</span>
                                <span class="field-type">Text</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">Special Instructions</span>
                                <span class="field-type">Long Text</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Apparel Sample Development -->
                    <div class="tree-node level-3">
                      <div class="node-content">
                        <div class="node-title">
                          <span class="node-icon">üëî</span>
                          Apparel Sample Development
                        </div>
                        <div class="node-description">
                          Apparel-specific development intent<br />
                          Defines WHY samples are needed, technical specifications, quality parameters, R&D requirements, and development approach
                        </div>

                        <!-- Core Fields Section -->
                        <div
                          class="fields-section collapsed"
                          id="sampleDevFields"
                        >
                          <div
                            class="fields-header"
                            onclick="toggleFields('sampleDevFields')"
                          >
                            <span>üîß Core Fields</span>
                            <span class="fields-toggle">‚ñº</span>
                          </div>
                          <div class="fields-content">
                            <div class="field-group">
                              <div class="field-group-title">A. Identity & Governance</div>
                              <div class="field-item">
                                <span class="field-name">Sample Development Number</span>
                                <span class="field-type">Auto Number</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">CSR</span>
                                <span class="field-type">Lookup</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">Opportunity</span>
                                <span class="field-type">Formula</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">Account</span>
                                <span class="field-type">Formula</span>
                              </div>
                              <div class="field-item">
                                <span class="field-name">Sample Development Owner</span>
                                <span class="field-type">User (PD Lead)</span>
                              </div>
                            </div>
                            <div class="field-group">
                              <div class="field-group-title">B. Administrative Status</div>
                              <div class="field-item">
                                <span class="field-name">Sample Development Status</span>
                                <span class="field-type">Picklist</span>
                              </div>
                              <div class="field-note">Draft / Active / Closed - No Path component here</div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="tree-children">
                        <!-- Apparel Sample Iterations -->
                        <div class="tree-node level-4">
                          <div class="node-content">
                            <div class="node-title">
                              <span class="node-icon">üîÑ</span>
                              Apparel Sample Iterations
                            </div>
                            <div class="node-description">
                              Each iteration represents one refinement<br />
                              based on feedback or rejection
                            </div>

                            <!-- Sample Development Stages Section -->
                            <div
                              class="stages-section"
                              id="sampleDevStages"
                            >
                              <div
                                class="stages-header"
                                onclick="toggleSampleDevStages()"
                              >
                                <span>üßµ Development Lifecycle Stages</span>
                                <span class="stages-toggle">‚ñº</span>
                              </div>
                              <div class="stages-content">
                                <!-- Stage 1: New Revision -->
                                <div class="stage-card pd">
                                  <div class="stage-header">
                                    <span class="stage-name">New Revision</span>
                                    <span class="stage-owner pd">PD</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Initiate new iteration cycle based on requirements or feedback</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ Review parent requirements or previous feedback</div>
                                    <div>‚Ä¢ Plan revision approach and target improvements</div>
                                    <div>‚Ä¢ Determine if R&D work is needed for this revision</div>
                                    <div><strong>Exit Criteria:</strong> Revision plan approved and ready to proceed</div>
                                  </div>
                                </div>

                                <!-- Stage 2: R&D -->
                                <div class="stage-card rnd">
                                  <div class="stage-header">
                                    <span class="stage-name">R&D</span>
                                    <span class="stage-owner rnd">R&D</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> R&D work in progress (for PD visibility)</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ R&D team conducts feasibility studies and trials</div>
                                    <div>‚Ä¢ PD monitors R&D progress and timeline</div>
                                    <div>‚Ä¢ R&D completes development and validates approach</div>
                                    <div><strong>Exit Criteria:</strong> R&D work completed, ready for sample production</div>
                                    <div><strong>Note:</strong> Owned by R&D Lead, visible to PD for tracking</div>
                                  </div>
                                </div>

                                <!-- Stage 3: In Development -->
                                <div class="stage-card rnd">
                                  <div class="stage-header">
                                    <span class="stage-name">In Development</span>
                                    <span class="stage-owner rnd">R&D</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Physical sample production in progress (for PD visibility)</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ R&D team executes SDO (Sample Development Order) in ERP</div>
                                    <div>‚Ä¢ Physical prototypes and samples being created</div>
                                    <div>‚Ä¢ PD monitors production progress and timeline</div>
                                    <div><strong>Exit Criteria:</strong> Physical samples completed and ready for testing</div>
                                    <div><strong>Note:</strong> Owned by R&D Lead, visible to PD for tracking</div>
                                  </div>
                                </div>

                                <!-- Stage 4: Internal Testing & Validation -->
                                <div class="stage-card pd">
                                  <div class="stage-header">
                                    <span class="stage-name">Internal Testing & Validation</span>
                                    <span class="stage-owner pd">PD</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Internal quality verification</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ Complete lab testing and quality control checks</div>
                                    <div>‚Ä¢ Perform technical and compliance validation</div>
                                    <div>‚Ä¢ Determine if sample passes internal standards</div>
                                    <div><strong>Exit Criteria:</strong> Internal validation decision made</div>
                                  </div>
                                </div>

                                <!-- Stage 5: Closed -->
                                <div class="stage-card pd">
                                  <div class="stage-header">
                                    <span class="stage-name">Closed</span>
                                    <span class="stage-owner pd">PD</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Iteration complete</div>
                                    <div><strong>Outcome - Approved:</strong></div>
                                    <div>‚Ä¢ Sample passed internal testing</div>
                                    <div>‚Ä¢ Ready for dispatch to customer (via SAR)</div>
                                    <div>‚Ä¢ Specifications locked for reference</div>
                                    <div><strong>Outcome - Rejected:</strong></div>
                                    <div>‚Ä¢ Sample failed internal testing</div>
                                    <div>‚Ä¢ Document rejection reasons and learnings</div>
                                    <div>‚Ä¢ May trigger new revision or close development</div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <!-- Core Fields Section -->
                            <div
                              class="fields-section collapsed"
                              id="sampleIterationFields"
                            >
                              <div
                                class="fields-header"
                                onclick="toggleFields('sampleIterationFields')"
                              >
                                <span>üîß Core Fields</span>
                                <span class="fields-toggle">‚ñº</span>
                              </div>
                              <div class="fields-content">
                                <div class="field-group">
                                  <div class="field-group-title">A. Identity</div>
                                  <div class="field-item">
                                    <span class="field-name">Sample Iteration Number</span>
                                    <span class="field-type">Auto Number</span>
                                  </div>
                                  <div class="field-item">
                                    <span class="field-name">Sample Development</span>
                                    <span class="field-type">Master-Detail</span>
                                  </div>
                                  <div class="field-item">
                                    <span class="field-name">Iteration Owner</span>
                                    <span class="field-type">User</span>
                                  </div>
                                </div>
                                <div class="field-group">
                                  <div class="field-group-title">B. UX Status Path</div>
                                  <div class="field-item">
                                    <span class="field-name">Sample Iteration Status</span>
                                    <span class="field-type">Picklist</span>
                                  </div>
                                  <div class="field-note">Draft / In Execution / Customer Review / Approved / Rejected</div>
                                </div>
                                <div class="field-group">
                                  <div class="field-group-title">C. Outcome & Feedback</div>
                                  <div class="field-item">
                                    <span class="field-name">Brand Feedback</span>
                                    <span class="field-type">Long Text</span>
                                  </div>
                                  <div class="field-item">
                                    <span class="field-name">Approval Date</span>
                                    <span class="field-type">Date</span>
                                  </div>
                                  <div class="field-item">
                                    <span class="field-name">Rejection Reason</span>
                                    <span class="field-type">Picklist</span>
                                  </div>
                                  <div class="field-item">
                                    <span class="field-name">Sample Images</span>
                                    <span class="field-type">Files</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="tree-children">
                            <!-- R&D Request -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üî¨</span>
                                  R&D Request (Optional)
                                </div>
                                <div class="node-description">
                                  Requested by PD Lead<br />
                                  Executed by R&D Lead
                                </div>

                                <!-- R&D Request Stages Section -->
                                <div
                                  class="stages-section"
                                  id="rndStages"
                                >
                                  <div
                                    class="stages-header"
                                    onclick="toggleRnDStages()"
                                  >
                                    <span>üî¨ R&D Request Lifecycle Stages</span>
                                    <span class="stages-toggle">‚ñº</span>
                                  </div>
                                  <div class="stages-content">
                                    <!-- Stage 1: Draft -->
                                    <div class="stage-card rnd">
                                      <div class="stage-header">
                                        <span class="stage-name">Draft</span>
                                        <span class="stage-owner rnd">R&D</span>
                                      </div>
                                      <div class="stage-details">
                                        <div><strong>Purpose:</strong> Initial R&D request creation and scoping</div>
                                        <div><strong>Activities:</strong></div>
                                        <div>‚Ä¢ PD requests with requirements</div>
                                        <div>‚Ä¢ R&D reviews request and validates scope</div>
                                        <div>‚Ä¢ Determine if external cluster engagement needed</div>
                                        <div><strong>Exit Criteria:</strong> Request validated and ready for execution</div>
                                      </div>
                                    </div>

                                    <!-- Stage 2: Cluster Engagement -->
                                    <div class="stage-card rnd">
                                      <div class="stage-header">
                                        <span class="stage-name">Cluster Engagement</span>
                                        <span class="stage-owner rnd">R&D</span>
                                      </div>
                                      <div class="stage-details">
                                        <div><strong>Purpose:</strong> Engage external clusters for R&D support</div>
                                        <div><strong>Activities:</strong></div>
                                        <div>‚Ä¢ Identify and contact relevant external clusters</div>
                                        <div>‚Ä¢ Share requirements and request cluster input</div>
                                        <div>‚Ä¢ Coordinate with clusters for trials and testing</div>
                                        <div><strong>Exit Criteria:</strong> Cluster engagement complete or not needed</div>
                                      </div>
                                    </div>

                                    <!-- Stage 3: Feasibility Assessment -->
                                    <div class="stage-card rnd">
                                      <div class="stage-header">
                                        <span class="stage-name">Feasibility Assessment</span>
                                        <span class="stage-owner rnd">R&D</span>
                                      </div>
                                      <div class="stage-details">
                                        <div><strong>Purpose:</strong> Conduct R&D trials and evaluate feasibility</div>
                                        <div><strong>Activities:</strong></div>
                                        <div>‚Ä¢ Execute R&D trials, experiments, and testing</div>
                                        <div>‚Ä¢ Analyze results and validate technical approach</div>
                                        <div>‚Ä¢ Document findings and determine feasibility</div>
                                        <div><strong>Exit Criteria:</strong> Feasibility determined (feasible or not feasible)</div>
                                      </div>
                                    </div>

                                    <!-- Stage 4: Proposal Creation -->
                                    <div class="stage-card rnd">
                                      <div class="stage-header">
                                        <span class="stage-name">Proposal Creation</span>
                                        <span class="stage-owner rnd">R&D</span>
                                      </div>
                                      <div class="stage-details">
                                        <div><strong>Purpose:</strong> Create detailed R&D proposal with commercial inputs</div>
                                        <div><strong>Activities:</strong></div>
                                        <div>‚Ä¢ Document technical specifications and process</div>
                                        <div>‚Ä¢ Prepare cost estimates and timeline projections</div>
                                        <div>‚Ä¢ Compile R&D proposal for customer review</div>
                                        <div><strong>Exit Criteria:</strong> Proposal ready for customer presentation</div>
                                      </div>
                                    </div>

                                    <!-- Stage 5: Customer Review -->
                                    <div class="stage-card rnd">
                                      <div class="stage-header">
                                        <span class="stage-name">Customer Review</span>
                                        <span class="stage-owner rnd">R&D</span>
                                      </div>
                                      <div class="stage-details">
                                        <div><strong>Purpose:</strong> Present R&D proposal to customer for approval</div>
                                        <div><strong>Activities:</strong></div>
                                        <div>‚Ä¢ Share R&D findings, costs, and timeline with customer</div>
                                        <div>‚Ä¢ Address customer questions and concerns</div>
                                        <div>‚Ä¢ Await customer decision on R&D proposal</div>
                                        <div><strong>Exit Criteria:</strong> Customer approves or rejects R&D approach</div>
                                      </div>
                                      <div class="customer-touchpoint">
                                        <span class="customer-touchpoint-icon">üî¨</span>
                                        <span><strong>Customer:</strong> Reviews R&D proposal and approves/rejects approach</span>
                                      </div>
                                    </div>

                                    <!-- Stage 6: Closed -->
                                    <div class="stage-card rnd">
                                      <div class="stage-header">
                                        <span class="stage-name">Closed</span>
                                        <span class="stage-owner rnd">R&D</span>
                                      </div>
                                      <div class="stage-details">
                                        <div><strong>Purpose:</strong> R&D request completed</div>
                                        <div><strong>Outcome - Approved:</strong></div>
                                        <div>‚Ä¢ Customer approved R&D approach and costs</div>
                                        <div>‚Ä¢ R&D outcomes handed over to PD for sample development</div>
                                        <div>‚Ä¢ Technical specifications locked for production</div>
                                        <div><strong>Outcome - Rejected:</strong></div>
                                        <div>‚Ä¢ Customer rejected R&D approach or costs</div>
                                        <div>‚Ä¢ Document rejection reasons and learnings</div>
                                        <div>‚Ä¢ Close R&D request and update Sample Iteration</div>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                                <!-- Core Fields Section -->
                                <div
                                  class="fields-section collapsed"
                                  id="rndFields"
                                >
                                  <div
                                    class="fields-header"
                                    onclick="toggleFields('rndFields')"
                                  >
                                    <span>üîß Core Fields</span>
                                    <span class="fields-toggle">‚ñº</span>
                                  </div>
                                  <div class="fields-content">
                                    <div class="field-group">
                                      <div class="field-group-title">A. Identity & Governance</div>
                                      <div class="field-item">
                                        <span class="field-name">R&D Request Number</span>
                                        <span class="field-type">Auto Number</span>
                                      </div>
                                      <div class="field-item">
                                        <span class="field-name">Related Sample Iteration</span>
                                        <span class="field-type">Lookup</span>
                                      </div>
                                      <div class="field-item">
                                        <span class="field-name">Opportunity</span>
                                        <span class="field-type">Lookup</span>
                                      </div>
                                      <div class="field-item">
                                        <span class="field-name">R&D Owner</span>
                                        <span class="field-type">User</span>
                                      </div>
                                    </div>
                                    <div class="field-group">
                                      <div class="field-group-title">B. UX Status Path</div>
                                      <div class="field-item">
                                        <span class="field-name">R&D Status</span>
                                        <span class="field-type">Picklist</span>
                                      </div>
                                      <div class="field-note">Requested / In Analysis / In Development / Completed / Rejected</div>
                                    </div>
                                    <div class="field-group">
                                      <div class="field-group-title">C. Commercial Inputs</div>
                                      <div class="field-item">
                                        <span class="field-name">R&D Cost Estimate</span>
                                        <span class="field-type">Currency</span>
                                      </div>
                                      <div class="field-item">
                                        <span class="field-name">R&D Timeline (Days)</span>
                                        <span class="field-type">Number</span>
                                      </div>
                                      <div class="field-item">
                                        <span class="field-name">Feasibility Notes</span>
                                        <span class="field-type">Long Text</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <!-- Sample Development Order -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üì¶</span>
                                  Sample Development Order (SDO)
                                </div>
                                <div class="node-description">
                                  Created by R&D Lead<br />
                                  Captured in Salesforce (header only)
                                </div>
                              </div>

                              <div class="tree-children">
                                <div class="tree-node level-6">
                                  <div class="node-content">
                                    <div class="node-title">
                                      <span class="node-icon">üè≠</span>
                                      Executed in ERP
                                    </div>
                                    <div class="node-description">Full execution managed in ERP system</div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Fabric Sample Development -->
                    <div class="tree-node level-3">
                      <div class="node-content">
                        <div class="node-title">
                          <span class="node-icon">üßµ</span>
                          Fabric Sample Development
                        </div>
                        <div class="node-description">Fabric-specific development intent</div>
                      </div>

                      <div class="tree-children">
                        <!-- Fabric Sample Iterations -->
                        <div class="tree-node level-4">
                          <div class="node-content">
                            <div class="node-title">
                              <span class="node-icon">üîÑ</span>
                              Fabric Sample Iterations
                            </div>
                            <div class="node-description">Refinement cycles for fabric development</div>
                          </div>

                          <div class="tree-children">
                            <!-- R&D Request -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üî¨</span>
                                  R&D Request (Optional)
                                </div>
                                <div class="node-description">R&D Execution for fabric trials</div>
                              </div>
                            </div>

                            <!-- Sample Development Order -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üì¶</span>
                                  Sample Development Order (SDO)
                                </div>
                                <div class="node-description">Executed in ERP</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Yarn Sample Development -->
                    <div class="tree-node level-3">
                      <div class="node-content">
                        <div class="node-title">
                          <span class="node-icon">ü™°</span>
                          Yarn Sample Development
                        </div>
                        <div class="node-description">Yarn-specific development intent</div>
                      </div>

                      <div class="tree-children">
                        <!-- Yarn Sample Iterations -->
                        <div class="tree-node level-4">
                          <div class="node-content">
                            <div class="node-title">
                              <span class="node-icon">üîÑ</span>
                              Yarn Sample Iterations
                            </div>
                            <div class="node-description">Refinement cycles for yarn development</div>
                          </div>

                          <div class="tree-children">
                            <!-- R&D Request -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üî¨</span>
                                  R&D Request (Optional)
                                </div>
                                <div class="node-description">R&D Execution for yarn trials</div>
                              </div>
                            </div>

                            <!-- Sample Development Order -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üì¶</span>
                                  Sample Development Order (SDO)
                                </div>
                                <div class="node-description">Executed in ERP</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Sample Issuance (Logical Grouping) -->
                    <div class="tree-node level-3">
                      <div class="node-content">
                        <div class="node-title">
                          <span class="node-icon">üìÆ</span>
                          Sample Issuance (Physical Samples)
                        </div>
                        <div class="node-description">
                          Logical grouping for physical sample issuance requests<br />
                          Includes apparel, fabric, and yarn sample requests
                        </div>
                      </div>

                      <div class="tree-children">
                        <!-- Sample Apparel Request -->
                        <div class="tree-node level-4">
                          <div class="node-content">
                            <div class="node-title">
                              <span class="node-icon">üëï</span>
                              Sample Apparel Request (SAR)
                            </div>
                            <div class="node-description">
                              Request for physical apparel samples to be issued to customer<br />
                              Tracks preparation, shipment, and customer feedback
                            </div>

                            <!-- SAR Stages Section -->
                            <div
                              class="stages-section"
                              id="sampleIssuanceStages"
                            >
                              <div
                                class="stages-header"
                                onclick="toggleSampleIssuanceStages()"
                              >
                                <span>üìÆ SAR Lifecycle Stages</span>
                                <span class="stages-toggle">‚ñº</span>
                              </div>
                              <div class="stages-content">
                                <!-- Stage 1: Issuance Preparation -->
                                <div class="stage-card pd">
                                  <div class="stage-header">
                                    <span class="stage-name">Issuance Preparation</span>
                                    <span class="stage-owner pd">PD</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Prepare samples for shipment</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ Select and verify samples for shipment</div>
                                    <div>‚Ä¢ Prepare packaging and documentation</div>
                                    <div>‚Ä¢ Arrange shipping and logistics</div>
                                    <div><strong>Exit Criteria:</strong> Ready for dispatch</div>
                                  </div>
                                </div>

                                <!-- Stage 2: Sample Dispatched -->
                                <div class="stage-card pd">
                                  <div class="stage-header">
                                    <span class="stage-name">Sample Dispatched</span>
                                    <span class="stage-owner pd">PD</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Samples shipped to customer</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ Dispatch samples and share tracking information</div>
                                    <div>‚Ä¢ Notify customer of shipment</div>
                                    <div>‚Ä¢ Monitor delivery status</div>
                                    <div><strong>Exit Criteria:</strong> Customer receives samples</div>
                                  </div>
                                </div>

                                <!-- Stage 3: Customer Receipt Confirmed -->
                                <div class="stage-card pd">
                                  <div class="stage-header">
                                    <span class="stage-name">Customer Receipt Confirmed</span>
                                    <span class="stage-owner pd">PD</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Confirm customer received samples</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ Obtain delivery confirmation from customer</div>
                                    <div>‚Ä¢ Schedule follow-up for feedback</div>
                                    <div>‚Ä¢ Update issuance record status</div>
                                    <div><strong>Exit Criteria:</strong> Receipt confirmed</div>
                                  </div>
                                  <div class="customer-touchpoint">
                                    <span class="customer-touchpoint-icon">üì¶</span>
                                    <span><strong>Customer:</strong> Confirms receipt of physical samples</span>
                                  </div>
                                </div>

                                <!-- Stage 4: Sample Review & Feedback -->
                                <div class="stage-card pd">
                                  <div class="stage-header">
                                    <span class="stage-name">Sample Review & Feedback</span>
                                    <span class="stage-owner pd">PD</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Customer evaluates samples</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ Customer reviews samples and provides feedback</div>
                                    <div>‚Ä¢ Document customer comments and decision</div>
                                    <div>‚Ä¢ Update parent Sample Development record</div>
                                    <div><strong>Exit Criteria:</strong> Feedback received</div>
                                  </div>
                                  <div class="customer-touchpoint">
                                    <span class="customer-touchpoint-icon">üí≠</span>
                                    <span><strong>Customer:</strong> Provides feedback and comments on samples</span>
                                  </div>
                                </div>

                                <!-- Stage 5: Closed -->
                                <div class="stage-card pd">
                                  <div class="stage-header">
                                    <span class="stage-name">Closed</span>
                                    <span class="stage-owner pd">PD</span>
                                  </div>
                                  <div class="stage-details">
                                    <div><strong>Purpose:</strong> Sample issuance process complete</div>
                                    <div><strong>Activities:</strong></div>
                                    <div>‚Ä¢ Collect all feedback and close issuance record</div>
                                    <div>‚Ä¢ Archive documentation for reference</div>
                                    <div>‚Ä¢ Update related records as needed</div>
                                    <div><strong>Outcome:</strong> Process completed</div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="tree-children">
                            <!-- SAR Line Items -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üìã</span>
                                  SAR Line Items
                                </div>
                                <div class="node-description">Individual apparel samples included in this issuance request</div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <!-- Sample Fabric Request -->
                        <div class="tree-node level-4">
                          <div class="node-content">
                            <div class="node-title">
                              <span class="node-icon">üß∂</span>
                              Sample Fabric Request (SFR)
                            </div>
                            <div class="node-description">Request for physical fabric samples to be issued to customer</div>
                          </div>

                          <div class="tree-children">
                            <!-- SFR Line Items -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üìã</span>
                                  SFR Line Items
                                </div>
                                <div class="node-description">Individual fabric samples included in this issuance request</div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <!-- Sample Yarn Request -->
                        <div class="tree-node level-4">
                          <div class="node-content">
                            <div class="node-title">
                              <span class="node-icon">üß∑</span>
                              Sample Yarn Request (SYR)
                            </div>
                            <div class="node-description">Request for physical yarn samples to be issued to customer</div>
                          </div>

                          <div class="tree-children">
                            <!-- SYR Line Items -->
                            <div class="tree-node level-5">
                              <div class="node-content">
                                <div class="node-title">
                                  <span class="node-icon">üìã</span>
                                  SYR Line Items
                                </div>
                                <div class="node-description">Individual yarn samples included in this issuance request</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Commercial Proposal -->
                <div class="tree-node level-2">
                  <div class="node-content">
                    <div class="node-title">
                      <span class="node-icon">üí∞</span>
                      Commercial Proposal
                    </div>
                    <div class="node-description">
                      Pricing and commercial terms based on:
                      <ul>
                        <li>‚Ä¢ Approved samples</li>
                        <li>‚Ä¢ Final cluster costs</li>
                      </ul>
                    </div>

                    <!-- Commercial Proposal Stages Section -->
                    <div
                      class="stages-section"
                      id="commercialProposalStages"
                    >
                      <div
                        class="stages-header"
                        onclick="toggleCommercialProposalStages()"
                      >
                        <span>üí∞ Commercial Proposal Lifecycle Stages</span>
                        <span class="stages-toggle">‚ñº</span>
                      </div>
                      <div class="stages-content">
                        <!-- Stage 1: Draft -->
                        <div class="stage-card sales">
                          <div class="stage-header">
                            <span class="stage-name">Draft</span>
                            <span class="stage-owner sales">Sales</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> Proposal creation and preparation</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ Gather costs and calculate pricing with margins</div>
                            <div>‚Ä¢ Draft commercial terms and conditions</div>
                            <div>‚Ä¢ Prepare proposal document for review</div>
                            <div><strong>Exit Criteria:</strong> Proposal ready for review</div>
                          </div>
                        </div>

                        <!-- Stage 2: Internal Review -->
                        <div class="stage-card sales">
                          <div class="stage-header">
                            <span class="stage-name">Internal Review</span>
                            <span class="stage-owner sales">Sales</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> Internal approval and verification</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ Management reviews and validates pricing/terms</div>
                            <div>‚Ä¢ Verify compliance and margin requirements</div>
                            <div>‚Ä¢ Obtain final approval to send to customer</div>
                            <div><strong>Exit Criteria:</strong> Internal approval obtained</div>
                          </div>
                        </div>

                        <!-- Stage 3: Customer Review -->
                        <div class="stage-card sales">
                          <div class="stage-header">
                            <span class="stage-name">Customer Review</span>
                            <span class="stage-owner sales">Sales</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> Customer evaluation and negotiation</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ Send proposal to customer for review</div>
                            <div>‚Ä¢ Negotiate terms and pricing as needed</div>
                            <div>‚Ä¢ Await customer acceptance or rejection</div>
                            <div><strong>Exit Criteria:</strong> Customer accepts or rejects</div>
                          </div>
                          <div class="customer-touchpoint">
                            <span class="customer-touchpoint-icon">üìã</span>
                            <span><strong>Customer:</strong> Reviews proposal and negotiates commercial terms</span>
                          </div>
                        </div>

                        <!-- Stage 4: Closed -->
                        <div class="stage-card sales">
                          <div class="stage-header">
                            <span class="stage-name">Closed</span>
                            <span class="stage-owner sales">Sales</span>
                          </div>
                          <div class="stage-details">
                            <div><strong>Purpose:</strong> Proposal accepted or rejected</div>
                            <div><strong>Activities:</strong></div>
                            <div>‚Ä¢ If accepted: Receive PO and create Customer Order</div>
                            <div>‚Ä¢ If rejected/withdrawn: Document reason and close</div>
                            <div>‚Ä¢ Update Opportunity to Closed Won or Lost</div>
                            <div><strong>Next Step:</strong> Opportunity moves to Closed Won or Lost</div>
                          </div>
                          <div class="customer-touchpoint">
                            <span class="customer-touchpoint-icon">‚úçÔ∏è</span>
                            <span><strong>Customer:</strong> Accepts proposal and issues PO, or formally declines</span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Core Fields Section -->
                    <div
                      class="fields-section collapsed"
                      id="quoteFields"
                    >
                      <div
                        class="fields-header"
                        onclick="toggleFields('quoteFields')"
                      >
                        <span>üîß Core Fields</span>
                        <span class="fields-toggle">‚ñº</span>
                      </div>
                      <div class="fields-content">
                        <div class="field-group">
                          <div class="field-group-title">A. Identity</div>
                          <div class="field-item">
                            <span class="field-name">Quote Number</span>
                            <span class="field-type">Auto Number</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Opportunity</span>
                            <span class="field-type">Lookup</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Quote Owner</span>
                            <span class="field-type">User</span>
                          </div>
                        </div>
                        <div class="field-group">
                          <div class="field-group-title">B. Pricing & Approval</div>
                          <div class="field-item">
                            <span class="field-name">Total Amount</span>
                            <span class="field-type">Currency</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Discount %</span>
                            <span class="field-type">Percent</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Approval Status</span>
                            <span class="field-type">Picklist</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Quote Status</span>
                            <span class="field-type">Picklist</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="tree-children">
                    <div class="tree-node level-3">
                      <div class="node-content">
                        <div class="node-title">
                          <span class="node-icon">üìä</span>
                          Commercial Proposal Line Items
                        </div>
                        <div class="node-description">Detailed pricing breakdown</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Customer Order -->
                <div class="tree-node level-2">
                  <div class="node-content">
                    <div class="node-title">
                      <span class="node-icon">‚úÖ</span>
                      Customer Order
                    </div>
                    <div class="node-description">
                      Confirmed customer commitment<br />
                      (Commercial Proposal approved + PO received)
                    </div>

                    <!-- Core Fields Section -->
                    <div
                      class="fields-section collapsed"
                      id="salesOrderFields"
                    >
                      <div
                        class="fields-header"
                        onclick="toggleFields('salesOrderFields')"
                      >
                        <span>üîß Core Fields</span>
                        <span class="fields-toggle">‚ñº</span>
                      </div>
                      <div class="fields-content">
                        <div class="field-group">
                          <div class="field-group-title">A. Identity</div>
                          <div class="field-item">
                            <span class="field-name">Sales Order Number</span>
                            <span class="field-type">Auto Number</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Opportunity</span>
                            <span class="field-type">Lookup</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Account</span>
                            <span class="field-type">Lookup</span>
                          </div>
                        </div>
                        <div class="field-group">
                          <div class="field-group-title">B. ERP Handoff Fields</div>
                          <div class="field-item">
                            <span class="field-name">PO Number</span>
                            <span class="field-type">Text</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">ERP Sync Status</span>
                            <span class="field-type">Picklist</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">ERP Order ID</span>
                            <span class="field-type">Text</span>
                          </div>
                          <div class="field-item">
                            <span class="field-name">Order Status</span>
                            <span class="field-type">Picklist</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="tree-children">
                    <div class="tree-node level-3">
                      <div class="node-content">
                        <div class="node-title">
                          <span class="node-icon">üöö</span>
                          Order Fulfilment
                        </div>
                        <div class="node-description">Executed in ERP</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-8 p-4 bg-blue-50 border-l-4 border-blue-500 rounded">
        <p class="text-sm text-blue-900">
          <strong>Note:</strong> Click on any node to view details. The hierarchy flows from Account (Customer/Brand) through Business Opportunity, Customer
          Sample Request, to various sample development types, and finally to Commercial Proposal and Customer Order.
        </p>
      </div>
    </div>

    <!-- Back to Top Button -->
    <div
      class="back-to-top"
      id="backToTop"
      onclick="scrollToTop()"
    >
      ‚Üë
    </div>

    <script>
      // Collapse all stages by default on page load
      window.addEventListener('DOMContentLoaded', function () {
        const stageSections = ['opportunityStages', 'csrStages', 'sampleDevStages', 'rndStages', 'sampleIssuanceStages', 'commercialProposalStages'];

        stageSections.forEach((sectionId) => {
          const section = document.getElementById(sectionId);
          if (section) {
            section.classList.add('collapsed');
          }
        });
      });

      // Back to Top Button functionality
      window.addEventListener('scroll', function () {
        const backToTopButton = document.getElementById('backToTop');
        if (window.pageYOffset > 300) {
          backToTopButton.classList.add('visible');
        } else {
          backToTopButton.classList.remove('visible');
        }
      });

      function scrollToTop() {
        window.scrollTo({
          top: 0,
          behavior: 'smooth',
        });
      }

      // Smooth scroll for TOC links
      document.querySelectorAll('.toc-link').forEach((link) => {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          const targetId = this.getAttribute('href').substring(1);
          const targetElement = document.getElementById(targetId);
          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: 'smooth',
              block: 'start',
            });
          }
        });
      });

      // Toggle stages section for Opportunity
      function toggleStages() {
        const stagesSection = document.getElementById('opportunityStages');
        stagesSection.classList.toggle('collapsed');
      }

      // Toggle stages section for CSR
      function toggleCSRStages() {
        const stagesSection = document.getElementById('csrStages');
        stagesSection.classList.toggle('collapsed');
      }

      // Toggle stages section for Sample Development
      function toggleSampleDevStages() {
        const stagesSection = document.getElementById('sampleDevStages');
        stagesSection.classList.toggle('collapsed');
      }

      // Toggle stages section for R&D Request
      function toggleRnDStages() {
        const stagesSection = document.getElementById('rndStages');
        stagesSection.classList.toggle('collapsed');
      }

      // Toggle stages section for Sample Issuance
      function toggleSampleIssuanceStages() {
        const stagesSection = document.getElementById('sampleIssuanceStages');
        stagesSection.classList.toggle('collapsed');
      }

      // Toggle stages section for Commercial Proposal
      function toggleCommercialProposalStages() {
        const stagesSection = document.getElementById('commercialProposalStages');
        stagesSection.classList.toggle('collapsed');
      }

      // Toggle fields section (generic function for all objects)
      function toggleFields(fieldsSectionId) {
        const fieldsSection = document.getElementById(fieldsSectionId);
        fieldsSection.classList.toggle('collapsed');
      }

      // Add click event listeners to all nodes for potential interactivity
      document.querySelectorAll('.node-content').forEach((node) => {
        node.addEventListener('click', function (e) {
          // Don't trigger if clicking on stages section or fields section
          if (e.target.closest('.stages-section') || e.target.closest('.fields-section')) {
            return;
          }
          e.stopPropagation();
          // Add subtle pulse animation on click
          this.style.animation = 'pulse 0.3s ease';
          setTimeout(() => {
            this.style.animation = '';
          }, 300);
        });
      });

      // Add CSS animation
      const style = document.createElement('style');
      style.textContent = `
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.02); }
            }
        `;
      document.head.appendChild(style);
    </script>
  </body>
</html>
